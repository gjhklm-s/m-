<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction System</title>
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
        import { getDatabase, ref, set, get, update, remove, onValue, push } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCmhDktMf0d4zwOWb6-QiH4XeZ8kdw-0KQ",
            authDomain: "first-5ab3c.firebaseapp.com",
            databaseURL: "https://first-5ab3c-default-rtdb.firebaseio.com",
            projectId: "first-5ab3c",
            storageBucket: "first-5ab3c.appspot.com",  // ‚úÖ Fixed typo
            messagingSenderId: "604964969212",
            appId: "1:604964969212:web:a25361a98c51db200cd579",
            measurementId: "G-GNBL37S97D"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Make Firebase functions accessible globally
        window.db = db;
        window.ref = ref;
        window.set = set;
        window.get = get;
        window.update = update;
        window.remove = remove;
        window.onValue = onValue;
        window.push = push;  // ‚úÖ Now correctly assigned
    </script>
<style>

       body {
	        width: 100%;
    padding: 0rem;
    background: linear-gradient(to right, #fca2ae, #fdfd40);
   /* background: rgb(208, 232, 180);*/
    margin: 0rem auto;
    max-width: 10000px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
text-align: center;
    
	  
           
        }
        #teamsContainer div {
    display: block !important;
}


		#hello {
    
    
    background: linear-gradient(to right, #75edc1, #b4da42);
    color: #2F4F4F;
    padding: 2rem;
    border-radius: 10px;
    display: block;
    width: 80%; /* Keep it within the main section */
    margin: 1rem auto; /* Centers the section */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    text-align: center;
    border: 3px solid #000; /* Adds a solid black border */
}




		header {
	         background-image: url('h.png');
		
             background-color: #FF8C00;
            color:#2F4F4F;
            padding: 4rem;
            text-align: center;
        }
        footer {
    background-image: url('he.png'); /* Change 'footer.png' to your image */
    
    background-position: center;
    background-color: #FF8C00;
    color: #2F4F4F;
    padding: 4rem;
    text-align: center;
}
       
        table {
            width: 100%;
            
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
			border-color:#1E90FF ;
            padding: 10px;
            text-align: center;
		justify-content: center;
			background-color:#F0FFF0;
			color:black;
        }
        th {
            background-color: green;
            color:white ;
        }
        button {
            padding: 10px;
            margin-top: 10px;
            
			
            color: white;
            border: none;
            cursor: pointer;
        }
        
            
		 h1 {
            font-size: 2rem;
            color:#B22222;
            overflow: hidden;
            border-right: .2em solid #ffffff;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .2em;
            animation: typing 3s steps(30, end), blink .5s step-end infinite alternate;
        }
		@keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink {
            from { border-color: transparent }
            to { border-color: white; }
        }
        /* Ensure main is centered */


/* Styling for auction box */
.auction-box {
    background: linear-gradient(to right, #e8f389, #ea91e2);
    color: #2F4F4F;
    padding: 2rem;
    border-radius: 10px;
    width: 80%;
    margin: 1rem auto;
    box-shadow: 0 0 10px rgba(216, 216, 6, 0.2);
    text-align: center;
    border: 3px solid #fe8409;
    position: relative;
    overflow: hidden;
    height: 100px; /* Ensures the video stays within the box */
}

.scoring-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: auto;
     object-fit: fill;
    z-index: 1;
    opacity: 0.6;
    animation: fadeIn 2s ease-in-out;

} 
@keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 0.4; }
}
.scorin-video {
    width: 100%;
    height: auto;
    border-radius: 10px;
    margin-top: 10px;
    display: none; /* Hidden by default */
}
       
.main-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
} 

/* Auction Title */
.auction-title {
    font-size: 24px;
    font-weight: bold;
    color: #000080;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 15px;
}
		
		
		h2{
		color:#8B0000;
        white-space: nowrap;
		}
		h3{
		color:#FF00FF;
		}
    </style>
</head>
<body>
 
    <header>

    </header>
    <main>
         <div class="auction-box">
            <div class="main-container">
<video autoplay loop muted playsinline class="scoring-video">
        <source src="csk.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
        <h1 class="auction-title">Auction 2.0</h1>
       <a href="https://www.instagram.com/su.jin7301/?next=%2F" target="_blank">
    <button class="auction-button"onmouseover="this.style.background='#800080';" 
        onmouseout="this.style.background='#FF4500';"
        style="
            background:#FF4500; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px;
            position: relative; 
            border-radius: 5px; 
            z-index: 2;
            cursor: pointer;">Click me</button>
</a>
</div>
    </div>  
	<h2>Players List</h2>
        <button onclick="showPlayers('Wicketkeepers')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Wicketkeepers</button>
        <button onclick="showPlayers('Openers')"onclick="removePlayer('${team}', ${index})" 
        onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Openers</button>
        <button onclick="showPlayers('MiddleOrder')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Middle Order</button>
        <button onclick="showPlayers('AllRounders')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">All-Rounders</button>
        <button onclick="showPlayers('Spinners')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Spinners</button>
        <button onclick="showPlayers('FastBowlers')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Fast Bowlers</button>
        <button onclick="showPlayers('ForeignPlayers')" onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Foreign Players</button>
        <button onclick="showPlayers('IndianPlayers')"onmouseover="this.style.background='#6B8E23';" 
        onmouseout="this.style.background='blue';"
        style="
            background:blue; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;"
    >Indian Players</button>
		

        <div id="playersList"></div>
        <br>
        <h2>Unsold Players</h2>
<table id="unsoldPlayersTable" border="1" style="width: 100%; text-align: center;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Remove</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<input type="text" id="unsoldPlayerName" placeholder="Enter Player Name" style="font-size: 18px; padding: 5px; width: 200px;">
<button onclick="addUnsoldPlayer()" style="background:#FF4500; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 5px; cursor: pointer;">Add Unsold Player</button>
		
		<a id="hello">
        <h2>Enter Auction Details</h2>
		<label for="teamName">Select Team:</label>
        <select id="teamName"style="font-size: 18px; padding: 5px; width: 200px;">
            <option value="">Select User</option>
            <option value="Sujin">Sujin</option>
            <option value="Ajin">Ajin</option>
            <option value="Abi">Abi</option>
            <option value="Asoke">Asoke</option>
            <option value="Kamal">Kamal</option>
            <option value="Anish">Anish</option>
            <option value="DD">DD</option>
            <option value="Raja">Raja</option>
            <option value="Aswath">Aswath</option>
            <option value="Varshan">Varshan</option>
            <option value="rrk">rrk</option>
        </select>
		
        <button onclick="setTeam()"onmouseover="this.style.background='#663399';" 
        onmouseout="this.style.background='#008000';"
        style="
            background:#008000; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;"">Select User</button>
		
        <h3 id="selectedTeam"></h3>
        <input type="text" id="playerName" placeholder="Enter Player Name"style="font-size: 18px; padding: 5px; width: 200px;"><br><br>
        <input type="number" id="price" placeholder="Enter Price in Cr"style="font-size: 18px; padding: 5px; width: 200px;"><br>
        <button onclick="addToAuction()"onmouseover="this.style.background='#663399';" 
        onmouseout="this.style.background='#008000';"
        style="
            background:#008000; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            font-size: 16px; 
            border-radius: 5px; 
            cursor: pointer;">Add to Auction</button>
            <video id="auctionVideo" class="scorin-video" autoplay muted playsinline style="display: none; width: 100%; height: auto;">
        <source src="au.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
		</a>
        <h2>Users</h2>
        <div id="teamsContainer"></div>
		 <h2>THE END</h2>
		<dl>
		<li>Congratulations to all the participants for taking part in this exciting auction game! Your strategic bidding and team-building skills made the competition thrilling‚Äîwell done! üéâüëè</li>
		
    </main>
    <footer></footer>
    <script>
         let unsoldPlayers = JSON.parse(localStorage.getItem("unsoldPlayers")) || [];
    
    function addUnsoldPlayer() {
        const playerName = document.getElementById("unsoldPlayerName").value.trim();
        if (!playerName) {
            alert("Please enter a player name!");
            return;
        }
        if (unsoldPlayers.includes(playerName)) {
            alert("Player is already in the unsold list!");
            return;
        }
        
        unsoldPlayers.push(playerName);
        localStorage.setItem("unsoldPlayers", JSON.stringify(unsoldPlayers));
        updateUnsoldTable();
        document.getElementById("unsoldPlayerName").value = "";
    }
    
    function updateUnsoldTable() {
        const tableBody = document.querySelector("#unsoldPlayersTable tbody");
        tableBody.innerHTML = "";
        
        unsoldPlayers.forEach((player, index) => {
            const row = `<tr>
                <td>${player}</td>
                <td><button onclick="removeUnsoldPlayer(${index})" style="background:red; color: white; border: none; padding: 5px 10px; font-size: 14px; border-radius: 5px; cursor: pointer;">Remove</button></td>
            </tr>`;
            tableBody.innerHTML += row;
        });
    }
    
    function removeUnsoldPlayer(index) {
        unsoldPlayers.splice(index, 1);
        localStorage.setItem("unsoldPlayers", JSON.stringify(unsoldPlayers));
        updateUnsoldTable();
    }
    
    window.addEventListener("load", updateUnsoldTable);
	const playerPoints = {
        "Jos Buttler":10, "Quinton De Kock":9, "Nicholas Pooran":10, "Rishab Pant":10, "Phil Salt":8,"Dhoni":10, "Ishan Kishan":8, "Jonny Bairstow":8, "Rahmanullah Gurbaz":7, "KL Rahul":8, "Jitesh Sharma":7, "Anuj Rawat":7, "Devon Conway":8, "Sanju Samson":8, "KS Bharat":7, "Shai Hope":6,
        "Ruturaj Gaikwad":8,"Rohit":10, "Shubman Gill":8, "Abhishek Sharma":9, "Yashasvi Jaiswal":8, "Sai Sudharsan":7, "Faf du Plessis":8, "David Warner":8, "Kane Williamson":6, "Daryl Mitchell":6,"Mohammad Rizwan":6,
        "David Miller":9,"virat":10, "Suryakumar Yadav":10, "Will Jacks":8, "Jake Fraser-McGurk":9, "Travis Head":10, "Shimron Hetmyer":8, "Tim David":8,"Kedar Jadhav ":6, "Heinrich Klaasen":10, "Tristan Stubbs":8, "Rovman Powell":6, "Rahul Tripathi":7, "Shivam Dube":8, "Deepak Hooda":6, "Shahrukh Khan":7, "Rinku Singh":8, "Manish Pandey":6, "Ajinkya Rahane":6, "Ayush Badoni":6, "Abdul Samad":6, "Tilak Verma":9, "Dhruv Jurel":7, "Riyan Parag":8, "Nitish Rana":6, "Rajat Patidar":8, "Abhinav Manohar":7, "Sameer Rizvi":6, "Shreyas Iyer":9, "Sarfaraz Khan":6, "Narayan Jagadeesan":6, "Prabhsimran Singh":7, "Shahbaz Ahmed":7, "Steve Smith":7, "Harry Brook":7, "Rilee Rossouw":6,
        "Ben Stokes":7, "Sunil Narine":10, "Andre Russell":10, "Hardik Pandya":10, "Glenn Maxwell":9, "Marcus Stoinis":9, "Romario Shepherd":7, "Liam Livingstone":8, "Mitchell Marsh":6, "Cameron Green":7, "Ravindra Jadeja":8, "Rachin Ravindra":7, "Sam Curran":7, "Axar Patel":8, "Rahul Tewatia":8, "Washington Sundar":7, "Venkatesh Iyer":7, "Moeen Ali":7, "Mitchell Santner":8, "Krunal Pandya":8, "Nitish Reddy":9, "Jason Holder":6, "Mohammad Nabi":6, "Aiden Markram":7, "Glenn Phillips":7, "Vijay Shankar":7, "Shakib Al Hasan":6, "Kyle Mayers":7,
        "Rashid Khan":10, "Ravichandran Ashwin":10, "Noor Ahmad":9, "Kuldeep Yadav":10, "Varun Chakravarthy":9, "Ravi Bishnoi":9, "Yuzvendra Chahal":10, "Rahul Chahar":8, "R. Sai Kishore":6, "Mayank Markande":6, "Maheesh Theekshana":7, "Wanindu Hasaranga":7, "Adam Zampa":6, "Shreyas Gopal":6, "Karn Sharma":7, "Krishnappa Gowtham":6, "Adil Rashid":6,
        "Matheesha Pathirana":10, "Mitchell Starc":10, "Kagiso Rabada":9, "Anrich Nortje":9, "Trent Boult":10, "Jasprit Bumrah":10, "Arshdeep Singh":9, "Jofra Archer":9, "Bhuvneshwar Kumar":10, "Josh Hazlewood":9, "Mohammad Shami":9, "Mohammad Siraj":8, "T. Natarajan":8, "Naveen-ul-Haq":7, "Pat Cummins":10, "Marco Jansen":9, "Mohit Sharma":8, "Shardul Thakur":6, "Ishant Sharma":8, "Prasidh Krishna":7, "Umesh Yadav":7, "Umran Malik":6, "Avesh Khan":7, "Deepak Chahar":8, "Nathan Ellis":7, "Lockie Ferguson":6, "Sandeep Sharma":7, "Tushar Deshpande":9, "Nuwan Thushara":7, "Harshal Patel":8, "Khaleel Ahmed":7, "Alzarri Joseph":6, "Tim Southee":6, "Chris Jordan":6, "Gerald Coetzee":7, "Spencer Johnson":6,
        "Tom Latham":6,"Sam Billings":6,"Reeza Hendricks":6,"Dwaine Pretorius":6,"Ish Sodhi":6,"Mark Wood":7,"Babar Azam":7,"Shaheen Afridi":7,"Chris Woakes":6,"Lungi Ngidi":7,"James Neesham":6,"Tom Curran":6,"Evin Lewis":7,"Jason Behrendorff":6,"Matthew Wade":6,"Jason Roy":6,
        "Mayank Agarwal":8,"Devdutt Padikkal":7,"Kamlesh Nagarkoti":6,"Shivam Mavi":6,"Suyash Sharma":6,"Lalit Yadav":6,"Chetan Sakariya":7,"Harshit Rana":8,"Arjun Tendulkar":6,"Yash Dayal":8,"Sandeep Warrier":6,"Suyash Prabhudessai":6
       
    };
	const players = {
            Wicketkeepers: ["Jos Buttler", "Quinton De Kock", "Nicholas Pooran", "Rishab Pant", "Phil Salt","Dhoni", "Ishan Kishan", "Jonny Bairstow", "Rahmanullah Gurbaz", "KL Rahul", "Jitesh Sharma", "Anuj Rawat", "Devon Conway", "Sanju Samson", "KS Bharat", "Shai Hope"],
            Openers: ["Ruturaj Gaikwad","Rohit", "Shubman Gill", "Abhishek Sharma", "Yashasvi Jaiswal", "Sai Sudharsan", "Faf du Plessis", "David Warner", "Kane Williamson", "Daryl Mitchell","Mohammad Rizwan"],
            MiddleOrder: ["David Miller","virat", "Suryakumar Yadav", "Will Jacks", "Jake Fraser-McGurk", "Travis Head", "Shimron Hetmyer", "Tim David","Kedar Jadhav ", "Heinrich Klaasen", "Tristan Stubbs", "Rovman Powell", "Rahul Tripathi", "Shivam Dube", "Deepak Hooda", "Shahrukh Khan", "Rinku Singh", "Manish Pandey", "Ajinkya Rahane", "Ayush Badoni", "Abdul Samad", "Tilak Verma", "Dhruv Jurel", "Riyan Parag", "Nitish Rana", "Rajat Patidar", "Abhinav Manohar", "Sameer Rizvi", "Shreyas Iyer", "Sarfaraz Khan", "Narayan Jagadeesan", "Prabhsimran Singh", "Shahbaz Ahmed", "Steve Smith", "Harry Brook", "Rilee Rossouw"],
            AllRounders: ["Ben Stokes", "Sunil Narine", "Andre Russell", "Hardik Pandya", "Glenn Maxwell", "Marcus Stoinis", "Romario Shepherd", "Liam Livingstone", "Mitchell Marsh", "Cameron Green", "Ravindra Jadeja", "Rachin Ravindra", "Sam Curran", "Axar Patel", "Rahul Tewatia", "Washington Sundar", "Venkatesh Iyer", "Moeen Ali", "Mitchell Santner", "Krunal Pandya", "Nitish Reddy", "Jason Holder", "Mohammad Nabi", "Aiden Markram", "Glenn Phillips", "Vijay Shankar", "Shakib Al Hasan", "Kyle Mayers"],
            Spinners: ["Rashid Khan", "Ravichandran Ashwin", "Noor Ahmad", "Kuldeep Yadav", "Varun Chakravarthy", "Ravi Bishnoi", "Yuzvendra Chahal", "Rahul Chahar", "R. Sai Kishore", "Mayank Markande", "Maheesh Theekshana", "Wanindu Hasaranga", "Adam Zampa", "Shreyas Gopal", "Karn Sharma", "Krishnappa Gowtham", "Adil Rashid"],
            FastBowlers: ["Matheesha Pathirana", "Mitchell Starc", "Kagiso Rabada", "Anrich Nortje", "Trent Boult", "Jasprit Bumrah", "Arshdeep Singh", "Jofra Archer", "Bhuvneshwar Kumar", "Josh Hazlewood", "Mohammad Shami", "Mohammad Siraj", "T. Natarajan", "Naveen-ul-Haq", "Pat Cummins", "Marco Jansen", "Mohit Sharma", "Shardul Thakur", "Ishant Sharma", "Prasidh Krishna", "Umesh Yadav", "Umran Malik", "Avesh Khan", "Deepak Chahar", "Nathan Ellis", "Lockie Ferguson", "Sandeep Sharma", "Tushar Deshpande", "Nuwan Thushara", "Harshal Patel", "Khaleel Ahmed", "Alzarri Joseph", "Tim Southee", "Chris Jordan", "Gerald Coetzee", "Spencer Johnson"],
        ForeignPlayers:["Tom Latham","Sam Billings","Reeza Hendricks","Dwaine Pretorius","Ish Sodhi","Mark Wood","Babar Azam","Shaheen Afridi","Chris Woakes","Lungi Ngidi","James Neesham","Tom Curran","Evin Lewis","Jason Behrendorff","Matthew Wade","Jason Roy"],
        IndianPlayers:["Mayank Agarwal","Devdutt Padikkal","Kamlesh Nagarkoti","Shivam Mavi","Suyash Sharma","Lalit Yadav","Chetan Sakariya","Harshit Rana","Arjun Tendulkar","Yash Dayal","Sandeep Warrier","Suyash Prabhudessai"]
		};
		function showPlayers(category) {
            document.getElementById("playersList").innerHTML =  `<h2>${category.replace(/([A-Z])/g, ' $1')}</h2><ol>` + players[category].map(player => `<li>${player}</li>`).join('') + `</ol>`;
        }
        
        let teams = JSON.parse(localStorage.getItem("teams")) || {
            "Sujin": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Ajin": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Abi": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Asoke": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Kamal": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Anish": { players: [], totalSpent: 0, remainingBudget: 150 },
            "DD": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Raja": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Aswath": { players: [], totalSpent: 0, remainingBudget: 150 },
            "Varshan": { players: [], totalSpent: 0, remainingBudget: 150 },
             "rrk": { players: [], totalSpent: 0, remainingBudget: 150 },
        };
        let currentCategory = "";
    let currentIndex = 0;

    function showPlayers(category) {
        currentCategory = category;
        currentIndex = 0;
        displayPlayer();
    }

    function displayPlayer() {
        const playerList = players[currentCategory];

        if (!playerList || playerList.length === 0) {
            document.getElementById("playersList").innerHTML = "<h2>No players available</h2>";
            return;
        }

        const player = playerList[currentIndex];

        document.getElementById("playersList").innerHTML = `
            <h2>${currentCategory.replace(/([A-Z])/g, ' $1')}</h2>
            <p><strong>Player ${currentIndex + 1}:</strong> ${player}</p>
			<button onclick="prevPlayer()"onmouseover="this.style.background='grey';"onmouseout="this.style.background='red';"style="
    background: red; 
    color: white; 
    border: none; 
    padding: 10px 20px; 
    font-size: 16px; 
    border-radius: 5px; 
    cursor: pointer;
    
    ">Previous Player</button>
            <button onclick="nextPlayer()"onmouseover="this.style.background='grey';"onmouseout="this.style.background='red';"style="
    background: red; 
    color: white; 
    border: none; 
    padding: 10px 20px; 
    font-size: 16px; 
    border-radius: 5px; 
    cursor: pointer;
    
    ">Next Player</button>
        `;
    }

    function nextPlayer() {
        const playerList = players[currentCategory];

        if (!playerList || playerList.length === 0) return;

        currentIndex = (currentIndex + 1) % playerList.length; // Loops back to the first player after the last
        displayPlayer();
    }
	function prevPlayer() {
        const playerList = players[currentCategory];

        if (!playerList || playerList.length === 0) return;

        currentIndex = (currentIndex - 1 + playerList.length) % playerList.length; // Loops backward
        displayPlayer();
    }
        let totalBudget = 150;
        let playerLimit = 20;
        
        function setTeam() {
            const selectedTeam = document.getElementById("teamName").value;
            if (!selectedTeam) {
                alert("Please select a user!");
                return;
            }
            document.getElementById("selectedTeam").textContent = "Selected User: " + selectedTeam;
        }
        
        function speakText(text) {
            if ('speechSynthesis' in window) {
                let speech = new SpeechSynthesisUtterance(text);
                speech.lang = 'en-US';
                speech.volume = 1;
                speech.rate = 1;
                speech.pitch = 1;
                window.speechSynthesis.speak(speech);
            }
        }
// ‚úÖ Initialize teams object if not defined
 function addToAuction() {
    const selectedTeam = document.getElementById("teamName").value;
    const player = document.getElementById("playerName").value;
    let price = parseFloat(document.getElementById("price").value);
     let auctionVideo = document.getElementById("auctionVideo");

    console.log("Add to Auction clicked!"); 

    if (!selectedTeam || !player || isNaN(price) || price <= 0) {
        alert("Please enter valid details!");
        speakText("Please enter valid details!");
        return;
    }

    console.log("Displaying video..."); // Debugging

    // Show the video and play from the start
    auctionVideo.style.display = "block";
    auctionVideo.currentTime = 0;
    auctionVideo.play();

    // Hide the video after 5 seconds
    setTimeout(() => {
        console.log("Hiding video..."); // Debugging
        auctionVideo.style.display = "none";
    }, 15000);

    // ‚úÖ Prevent Duplicate Player
    for (let team in teams) {
        if (teams[team]?.players?.some(p => p.player === player)) {
            alert(`Player "${player}" is already sold!`);
             speakText(`Player "${player}" is already sold!`);
            return;
        }
    }
if (unsoldPlayers.includes(player)) {
            alert(`Player "${player}" is in the unsold list and cannot be added to another table!`);
            speakText(`Player ${player} is in the unsold list and cannot be added!`);
            return;
        }
    // ‚úÖ Ensure Team Exists
    if (!teams[selectedTeam]) {
        teams[selectedTeam] = { players: [], totalSpent: 0, remainingBudget: totalBudget };
    }

    // ‚úÖ Ensure players array exists
    if (!teams[selectedTeam].players) {
        teams[selectedTeam].players = [];
    }

    // ‚úÖ Player Limit Check
    if (teams[selectedTeam].players.length >= playerLimit) {
        alert("Player limit reached for this team!");
        speakText("Player limit reached for " + selectedTeam);
        return;
    }

    // ‚úÖ Budget Check
    if (teams[selectedTeam].totalSpent + price > totalBudget) {
        alert("Budget Exceeded! You cannot spend more than ‚Çπ150 Cr.");
        speakText("Budget Exceeded! You cannot spend more than 150 crore rupees.");
        return;
    }

    let points = playerPoints[player] || 4;

    // ‚úÖ Add Player to Team
    teams[selectedTeam].players.push({ player, price, points });
    teams[selectedTeam].totalSpent += price;
    teams[selectedTeam].remainingBudget = totalBudget - teams[selectedTeam].totalSpent;

    // üî• Update Firebase and FORCE UI Update
    update(ref(db, `teams/${selectedTeam}`), {
        players: teams[selectedTeam].players,
        totalSpent: teams[selectedTeam].totalSpent,
        remainingBudget: teams[selectedTeam].remainingBudget
    }).then(() => {
        console.log(`‚úÖ Player "${player}" added successfully to ${selectedTeam}`);
        updateTeamTables(); // ‚úÖ Ensure UI updates immediately
    }).catch(error => {
        console.error("‚ùå Error adding player to Firebase:", error);
    });

    // üî• Save auction data
    set(ref(db, `auctions/${player}`), {
        player,
        price,
        team: selectedTeam,
        points,
        timestamp: Date.now()
    });

    let totalPoints = teams[selectedTeam].players.reduce((sum, p) => sum + (p.points || 0), 0);
    let message = `${selectedTeam} bought ${player} for ${price} Crores.`;

    if (price >= 0.5 && price <= 5) message += "\nIt's a steal buy!";
    else if (price > 5 && price <= 10) message += "\nIt's an excellent buy!";
    else if (price > 10 && price <= 15) message += "\nIt's a great buy!";
    else if (price > 15 && price <= 20) message += "\nIt's a good buy!";
    else if (price > 21) message += "\nOver Priced!";
    message += `\nTotal Points: ${totalPoints}.`;

    alert(message);
    speakText(message);
}

// ‚úÖ Remove Player from Firebase
function removePlayerFromFirebase(team, playerName) {
    if (confirm(`Are you sure you want to remove ${playerName} from ${team}?`)) {
        let newPlayers = teams[team]?.players?.filter(p => p.player !== playerName) || [];
        let totalSpent = newPlayers.reduce((sum, p) => sum + p.price, 0);
        let remainingBudget = totalBudget - totalSpent;

        let teamUpdate = {
            players: newPlayers,
            totalSpent,
            remainingBudget
        };

        // üî• If no players left, ensure empty array is saved in Firebase
        if (newPlayers.length === 0) {
            teamUpdate.players = []; // Explicitly set empty array
        }

        // üî• Update Firebase
        update(ref(db, `teams/${team}`), teamUpdate)
        .then(() => {
            console.log(`‚úÖ Player "${playerName}" removed successfully from ${team}`);
            updateTeamTables(); // ‚úÖ Ensure UI updates immediately
        })
        .catch(error => {
            console.error("‚ùå Error removing player from Firebase:", error);
        });

        // üî• Remove player from auction records
        remove(ref(db, `auctions/${playerName}`));
    }
}


// ‚úÖ Listen for Auction Updates (Real-Time)
function listenForAuctionUpdates() {
    onValue(ref(db, "auctions"), (snapshot) => {
        if (snapshot.exists()) {
            console.log("Auction Updates:", snapshot.val());
            updateAuctionTable(snapshot.val());
        } else {
            console.log("No auction data available.");
        }
    });
}
function updateTeamTables() {
    const teamsContainer = document.getElementById("teamsContainer");
    if (!teamsContainer) {
        console.error("teamsContainer div is missing in HTML!");
        return;
    }

    teamsContainer.innerHTML = "<p>Loading teams...</p>"; // Temporary loading message

    // ‚úÖ Use Firebase onValue to listen for real-time updates
    onValue(ref(db, "teams"), (snapshot) => {
        if (snapshot.exists()) {
            const teamsData = snapshot.val();
            console.log("üîÑ Live Team Data from Firebase:", teamsData);

            teams = teamsData; // ‚úÖ Keep local teams updated
            teamsContainer.innerHTML = ""; // ‚úÖ Clear existing tables before rendering

            Object.keys(teamsData).forEach(team => {
                const teamDiv = document.createElement("div");
                teamDiv.style.marginBottom = "20px"; // Add spacing between team tables

                // ‚úÖ Ensure players list is always an array
                let players = teamsData[team]?.players ? Object.values(teamsData[team].players) : [];

                let totalPoints = players.reduce((sum, player) => sum + (player.points || 0), 0);

                let playersHTML = players.length > 0
                    ? players.map(player => `
                        <tr>
                            <td>${player.player}</td>
                            <td>‚Çπ${player.price.toFixed(2)} Cr</td>
                            <td>${player.points}</td>
                            <td>
                                <button onclick="removePlayerFromFirebase('${team}', '${player.player}')"
                                    style="background: red; color: white; border: none; padding: 10px 20px; font-size: 16px; border-radius: 5px; cursor: pointer;">
                                    Remove
                                </button>
                            </td>
                        </tr>
                    `).join("")
                    : ""; // ‚úÖ Keep the table empty if no players exist

                teamDiv.innerHTML = `
                    <h3>${team} (Players: ${players.length}/${playerLimit})</h3>
                    <p><strong>Total Spent: ‚Çπ${(teamsData[team].totalSpent || 0).toFixed(2)} Cr</strong></p>
                    <p><strong>Remaining Budget: ‚Çπ${(teamsData[team].remainingBudget || totalBudget).toFixed(2)} Cr</strong></p>
                    <table border="1" cellpadding="10" cellspacing="0">
                        <thead>
                            <tr>
                                <th>Player</th>
                                <th>Price (Cr)</th>
                                <th>Points</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="team-${team}-players">${playersHTML}</tbody>
                        <tfoot>
                            <tr>
                                <td colspan="2"><strong>Total Players: ${players.length}</strong></td>
                                <td colspan="2"><strong>Total Points: ${totalPoints}</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                `;

                teamsContainer.appendChild(teamDiv);
            });
        } else {
            console.log("No team data available.");
            teamsContainer.innerHTML = ""; // ‚ùå Don't show any message if no teams exist
        }
    }, { onlyOnce: false }); // ‚úÖ Listen for real-time updates!
}
// ‚úÖ Ensure the function runs when the page loads
document.addEventListener("DOMContentLoaded", () => {
    updateTeamTables();
});





</script>
</body>
</html>